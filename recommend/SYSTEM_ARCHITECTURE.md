# 知识图谱推荐系统架构图

```
🎓 智能教育推荐系统架构图 (V2.0 - 支持B/S架构和数据持久化)
================================================================================

                           📱 前端界面层
                    ┌─────────────────────────────┐
                    │  🖥️ Web界面 / 📱 移动端APP  │
                    │  • 学生答题界面            │
                    │  • 学习进度展示            │
                    │  • 学习分析报告            │
                    │  • 数据管理界面            │
                    └─────────────┬───────────────┘
                                  │ HTTP/API 调用
                                  ▼
                           🚀 API接口层
                    ┌─────────────────────────────┐
                    │      start.py              │
                    │  • EducationRecommendationAPI │
                    │  • 会话管理                │
                    │  • 数据格式转换            │
                    │  • 错误处理                │
                    │  • 💾 数据持久化接口       │
                    └─────────────┬───────────────┘
                                  │ 内部调用
                                  ▼
                          🧠 核心推荐引擎
                    ┌─────────────────────────────┐
                    │    simple_system.py        │
                    │                            │
                    │  🧑‍🎓 StudentModel          │
                    │  • 向量化知识状态表示      │
                    │  • 动态学习更新机制        │
                    │  • 掌握度实时追踪          │
                    │  • 🔄 遗忘曲线建模         │
                    │  • 📊 个性化权重调整       │
                    │  • 💾 数据导出/导入        │
                    │                            │
                    │  🎯 RecommendationSystem    │
                    │  • 向量推理算法            │
                    │  • 多维评分机制            │
                    │  • 智能题目推荐            │
                    │  • 🎚️ 自适应难度调节      │
                    │                            │
                    │  🔍 DiagnosticSystem       │
                    │  • 答题自动判分            │
                    │  • 薄弱知识点诊断          │
                    │  • 个性化学习建议          │
                    │  • 🔄 错题重现机制         │
                    └─────────────┬───────────────┘
                                  │ 数据读取
                                  ▼
                            📊 数据存储层
                ┌──────────────────┬──────────────────┬──────────────────┐
                │                  │                  │                  │
                ▼                  ▼                  ▼                  ▼
        🔗 嵌入向量数据      📚 题库数据        📈 知识图谱        💾 持久化存储
    ┌──────────────────┐ ┌────────────────┐ ┌──────────────────┐ ┌──────────────────┐
    │  embeddings.csv  │ │question_bank.json│ │knowledge_graph.csv│ │  🗄️ 数据库/文件  │
    │                  │ │                │ │                  │ │                  │
    │ • 50维语义向量   │ │ • 25道标准题目 │ │ • 26个知识点     │ │ • 学生数据备份   │
    │ • K1-K26映射     │ │ • A/B/C/D选项  │ │ • 前置/相关关系  │ │ • 学习历史记录   │
    │ • 聚类优化结构   │ │ • 知识点权重   │ │ • 学习路径信息   │ │ • 系统状态快照   │
    │ • 相似度验证     │ │ • 标准答案     │ │ • 难度层次       │ │ • JSON/SQL存储   │
    └──────────────────┘ └────────────────┘ └──────────────────┘ └──────────────────┘

================================================================================

🔄 核心工作流程（增强版）：

1. 📝 学生开始学习会话
   ├─ 🔄 从持久化存储恢复学生数据（如果存在）
   ├─ 🎯 创建/加载学生向量模型
   ├─ 📊 初始化/恢复知识点掌握度
   ├─ ⏰ 应用遗忘曲线模型
   └─ 🚀 激活个性化推荐引擎

2. 🎲 智能题目推荐（优化版）
   ├─ 🧠 分析当前学习状态和历史模式
   ├─ 📊 计算个性化权重配置
   ├─ ⚡ 向量推理计算目标知识点
   ├─ 🔍 搜索相关候选题目
   ├─ 🎚️ 自适应难度匹配
   ├─ � 检查错题重现需求
   ├─ �📊 多维度评分排序
   └─ 🎯 返回最优推荐题目

3. 📝 学生答题与判分（增强版）
   ├─ ✅ 自动判断答案正确性
   ├─ 📊 记录答题详细信息和时间戳
   ├─ 🔄 更新学生知识向量
   ├─ 📈 更新知识点掌握度
   ├─ 🎚️ 调整个人难度偏好
   ├─ 📝 记录错题信息
   └─ 💾 实时数据备份

4. 🔍 学习诊断分析（智能版）
   ├─ 🎯 识别薄弱知识点
   ├─ 📊 生成学习进展报告
   ├─ � 分析遗忘曲线效果
   ├─ �💡 提供个性化建议
   ├─ 📈 制定下阶段学习策略
   └─ 🔄 规划错题复习计划

5. 💾 数据持久化管理
   ├─ 📊 定时导出学生数据
   ├─ 🗄️ 保存到数据库/文件
   ├─ 🔄 服务重启时数据恢复
   └─ 📈 系统状态监控

6. 🔄 循环优化推荐
   ├─ 📊 基于最新学习状态
   ├─ 🎯 调整推荐策略
   ├─ 🔄 应用遗忘曲线
   └─ 🚀 开始下一轮推荐

================================================================================

🎯 核心算法流程（优化版）：

学生向量更新（支持遗忘曲线）：
V_new = α × V_old + (1-α) × V_batch
      ↓ 归一化
V_student = V_new / ||V_new||
      ↓ 遗忘曲线应用
mastery_new = mastery × e^(-t/memory_strength)

个性化权重调整：
if accuracy > 0.8:
    weights = {coverage: 0.3, relevance: 0.25, difficulty: 0.3, diversity: 0.15}
elif accuracy < 0.5:
    weights = {coverage: 0.4, relevance: 0.4, difficulty: 0.15, diversity: 0.05}
else:
    weights = {coverage: 0.4, relevance: 0.3, difficulty: 0.2, diversity: 0.1}

推荐向量推理（智能难度调节）：
V_target = V_mastered + V_prerequisite
         ↓ 相似度计算
candidates = cosine_similarity(V_target, V_all_concepts)
         ↓ 难度自适应
target_difficulty = base_difficulty + personal_offset

综合评分机制（个性化）：
Score = w1×Coverage + w2×Relevance + w3×Difficulty + w4×Diversity
      ↓ 错题重现优先级
if is_error_review:
    Score += priority_boost
      ↓ 排序选择
Top_N_Questions = argmax(Score, N=3)

数据持久化流程：
export_data() → JSON序列化 → 数据库/文件存储
              ↓
import_data() ← JSON反序列化 ← 数据库/文件加载

================================================================================

💾 B/S架构支持特性：

• 🔄 完整的学生数据导出/导入
• 📊 批量数据管理功能
• 💾 文件和数据库双重备份
• 🚀 服务重启后数据恢复
• 📈 系统状态实时监控
• 🔄 遗忘曲线建模支持
• 🎚️ 个性化权重动态调整
• 🔍 错题智能重现机制

================================================================================
```
