# æ¨èç®—æ³•ä¼˜åŒ–å®ç°æŠ¥å‘Š

## ğŸ¯ ä¼˜åŒ–ç›®æ ‡

æ ¹æ®ç”¨æˆ·éœ€æ±‚ï¼Œåœ¨ä¿æŒå‰ç«¯APIè°ƒç”¨æ–¹å¼ä¸å˜çš„å‰æä¸‹ï¼Œå®ç°ä»¥ä¸‹ä¸¤ä¸ªæ ¸å¿ƒä¼˜åŒ–ï¼š

1. **ä¸ªæ€§åŒ–æƒé‡è°ƒæ•´** - æ ¹æ®å­¦ç”Ÿå­¦ä¹ ç‰¹ç‚¹åŠ¨æ€è°ƒæ•´æ¨èç­–ç•¥
2. **é—å¿˜æ›²çº¿å»ºæ¨¡** - å…è®¸é”™é¢˜é‡ç°ï¼Œæ¨¡æ‹ŸçœŸå®å­¦ä¹ é—å¿˜è¿‡ç¨‹

## âœ… å·²å®ç°çš„ä¼˜åŒ–åŠŸèƒ½

### 1. ä¸ªæ€§åŒ–æƒé‡è°ƒæ•´

#### å®ç°åŸç†
- **åŠ¨æ€æƒé‡è®¡ç®—**: æ ¹æ®å­¦ç”Ÿç­”é¢˜å†å²å’Œæ­£ç¡®ç‡è°ƒæ•´æ¨èæƒé‡
- **å­¦ä¹ æ¨¡å¼è¯†åˆ«**: åŒºåˆ†æ–°æ‰‹ã€ä¸­ç­‰ã€é«˜æ°´å¹³å­¦ç”Ÿï¼Œé‡‡ç”¨ä¸åŒç­–ç•¥
- **ä¸ªæ€§åŒ–å‚æ•°**: å¼•å…¥ä¸ªäººéš¾åº¦åå¥½ï¼Œé€‚åº”ä¸åŒå­¦ä¹ é£æ ¼

#### å…·ä½“å®ç°
```python
def calculate_adaptive_weights(self) -> Dict[str, float]:
    """æ ¹æ®å­¦ç”Ÿè¡¨ç°åŠ¨æ€è°ƒæ•´æƒé‡"""
    if len(self.question_history) < 5:
        # æ–°å­¦ç”Ÿï¼šé‡è§†åŸºç¡€è¦†ç›–
        return {'coverage': 0.5, 'relevance': 0.3, 'difficulty': 0.15, 'diversity': 0.05}
    
    correct_count = sum(1 for ans in self.question_history if ans.get('correct', False))
    accuracy = correct_count / len(self.question_history)
    avg_mastery = np.mean(list(self.mastery_scores.values()))
    
    if accuracy > 0.8 and avg_mastery > 0.4:
        # é«˜æ°´å¹³å­¦ç”Ÿï¼šé‡è§†æŒ‘æˆ˜æ€§å’Œå¤šæ ·æ€§
        return {'coverage': 0.3, 'relevance': 0.25, 'difficulty': 0.3, 'diversity': 0.15}
    elif accuracy < 0.5 or avg_mastery < 0.2:
        # éœ€è¦å·©å›ºåŸºç¡€ï¼šé‡è§†ç›¸å…³æ€§å’Œé€‚å½“éš¾åº¦
        return {'coverage': 0.4, 'relevance': 0.4, 'difficulty': 0.15, 'diversity': 0.05}
    else:
        # ä¸­ç­‰æ°´å¹³ï¼šä½¿ç”¨é»˜è®¤æƒé‡
        return {'coverage': 0.4, 'relevance': 0.3, 'difficulty': 0.2, 'diversity': 0.1}
```

#### æƒé‡ç­–ç•¥
- **æ–°æ‰‹å­¦ç”Ÿ** (0-5é¢˜): é‡è§†è¦†ç›–åº¦(50%)ï¼Œå»ºç«‹åŸºç¡€çŸ¥è¯†æ¡†æ¶
- **é«˜æ°´å¹³å­¦ç”Ÿ** (æ­£ç¡®ç‡>80%): é‡è§†éš¾åº¦(30%)å’Œå¤šæ ·æ€§(15%)ï¼Œæä¾›æŒ‘æˆ˜
- **éœ€è¦å·©å›ºå­¦ç”Ÿ** (æ­£ç¡®ç‡<50%): é‡è§†ç›¸å…³æ€§(40%)ï¼Œå¼ºåŒ–åŸºç¡€
- **ä¸­ç­‰å­¦ç”Ÿ**: ä½¿ç”¨å‡è¡¡æƒé‡ç­–ç•¥

### 2. é—å¿˜æ›²çº¿å»ºæ¨¡

#### å®ç°åŸç†
- **æ—¶é—´è¿½è¸ª**: è®°å½•æ¯ä¸ªçŸ¥è¯†ç‚¹çš„æœ€åç»ƒä¹ æ—¶é—´
- **é—å¿˜å‡½æ•°**: åŸºäºè‰¾å®¾æµ©æ–¯é—å¿˜æ›²çº¿ï¼Œæ¨¡æ‹Ÿè®°å¿†è¡°å‡
- **é”™é¢˜ç®¡ç†**: æ™ºèƒ½é”™é¢˜é‡ç°æœºåˆ¶ï¼Œæ ¹æ®é—å¿˜ç¨‹åº¦å®‰æ’å¤ä¹ 

#### å…·ä½“å®ç°
```python
def apply_forgetting_curve(self) -> None:
    """åº”ç”¨é—å¿˜æ›²çº¿ï¼Œè°ƒæ•´çŸ¥è¯†ç‚¹æŒæ¡åº¦"""
    current_time = time.time()
    
    for kp_id, mastery_score in self.mastery_scores.items():
        if kp_id in self.knowledge_practice_times:
            last_practice = self.knowledge_practice_times[kp_id]
            days_elapsed = (current_time - last_practice) / (24 * 3600)
            
            # é—å¿˜å‡½æ•°: R(t) = e^(-t/S), Sæ˜¯è®°å¿†å¼ºåº¦
            memory_strength = max(1.0, mastery_score * 10)
            retention_rate = np.exp(-days_elapsed / memory_strength)
            
            # åº”ç”¨é—å¿˜è¡°å‡ï¼Œä½†ä¿ç•™æœ€ä½å€¼
            new_mastery = max(0.05, mastery_score * retention_rate)
            self.mastery_scores[kp_id] = new_mastery
```

#### é—å¿˜æœºåˆ¶
- **è®°å¿†å¼ºåº¦**: ä¸æŒæ¡åº¦æˆæ­£æ¯”ï¼ŒæŒæ¡è¶Šå¥½é—å¿˜è¶Šæ…¢
- **æ—¶é—´è¡°å‡**: ä½¿ç”¨æŒ‡æ•°è¡°å‡å‡½æ•°æ¨¡æ‹ŸçœŸå®é—å¿˜è¿‡ç¨‹
- **æœ€ä½ä¿æŠ¤**: é¿å…æŒæ¡åº¦å®Œå…¨å½’é›¶ï¼Œä¿ç•™åŸºç¡€è®°å¿†

### 3. é”™é¢˜é‡ç°åŠŸèƒ½

#### å®ç°åŸç†
- **é”™é¢˜åˆ†ç±»**: æŒ‰çŸ¥è¯†ç‚¹å’Œæ—¶é—´åˆ†ç±»ç®¡ç†é”™é¢˜
- **é‡ç°ä¼˜å…ˆçº§**: æ ¹æ®é—å¿˜ç¨‹åº¦å’Œé‡è¦æ€§è®¡ç®—é‡ç°ä¼˜å…ˆçº§
- **æ™ºèƒ½è°ƒåº¦**: åœ¨åˆé€‚æ—¶æœºé‡ç°é”™é¢˜ï¼Œé¿å…è¿‡åº¦é‡å¤

#### å…·ä½“å®ç°
```python
def get_error_prone_questions(self, current_time: float = None) -> List[Dict]:
    """è·å–éœ€è¦é‡ç°çš„é”™é¢˜"""
    if current_time is None:
        current_time = time.time()
    
    candidates = []
    for wrong_q in self.wrong_questions:
        days_since_error = (current_time - wrong_q['timestamp']) / (24 * 3600)
        
        # æ ¹æ®é—å¿˜æ›²çº¿è®¡ç®—é‡ç°ä¼˜å…ˆçº§
        if days_since_error >= 1:  # è‡³å°‘é—´éš”1å¤©
            kp_mastery = min([self.mastery_scores.get(kp, 0) for kp in wrong_q['knowledge_points']])
            urgency = 1.0 / (1.0 + kp_mastery)  # æŒæ¡åº¦è¶Šä½è¶Šç´§æ€¥
            time_factor = min(2.0, days_since_error / 3)  # æ—¶é—´å› å­
            
            priority_score = urgency * time_factor
            
            candidates.append({
                'qid': wrong_q['qid'],
                'priority_score': priority_score,
                'days_since_error': days_since_error
            })
    
    candidates.sort(key=lambda x: x['priority_score'], reverse=True)
    return candidates
```

### 4. æ™ºèƒ½éš¾åº¦è°ƒèŠ‚

#### å®ç°åŸç†
- **åŠ¨æ€ç›®æ ‡éš¾åº¦**: æ ¹æ®å­¦ç”Ÿå½“å‰æ°´å¹³è°ƒæ•´ç›®æ ‡éš¾åº¦
- **éš¾åº¦è¯„åˆ†ä¼˜åŒ–**: ä½¿ç”¨é«˜æ–¯åˆ†å¸ƒæ›¿ä»£çº¿æ€§è·ç¦»
- **ä¸ªäººåå¥½å­¦ä¹ **: æ ¹æ®ç­”é¢˜è¡¨ç°è°ƒæ•´ä¸ªäººéš¾åº¦åå¥½

#### å…·ä½“å®ç°
```python
def _adaptive_difficulty_scoring(self, student: StudentModel, question_difficulty: float) -> float:
    """è‡ªé€‚åº”éš¾åº¦è¯„åˆ†"""
    avg_mastery = np.mean(list(student.mastery_scores.values()))
    
    # åŠ¨æ€è°ƒæ•´ç›®æ ‡éš¾åº¦
    if avg_mastery < 0.3:
        target_difficulty = 0.4  # åˆå­¦è€…
    elif avg_mastery < 0.6:
        target_difficulty = 0.6  # ä¸­ç­‰æ°´å¹³
    else:
        target_difficulty = 0.8  # é«˜æ°´å¹³
    
    # è€ƒè™‘ä¸ªäººéš¾åº¦åå¥½
    target_difficulty += student.personal_difficulty_offset
    target_difficulty = max(0.1, min(0.9, target_difficulty))
    
    # ä½¿ç”¨é«˜æ–¯åˆ†å¸ƒè¯„åˆ†ï¼Œæ›´å¹³æ»‘çš„éš¾åº¦åŒ¹é…
    difficulty_score = np.exp(-((question_difficulty - target_difficulty) ** 2) / 0.08)
    return difficulty_score
```

## ğŸ”§ é…ç½®ä¼˜åŒ–

### æ–°å¢é…ç½®å‚æ•°

```json
{
  "forgetting_curve": {
    "enabled": true,
    "memory_decay_rate": 0.1,
    "minimum_retention": 0.05,
    "review_threshold": 0.3
  },
  "personalization": {
    "adaptive_weights": true,
    "difficulty_adaptation": true,
    "learning_rate": 0.1
  },
  "error_review": {
    "enabled": true,
    "min_interval_days": 1,
    "max_review_count": 3
  }
}
```

## ğŸ“Š æµ‹è¯•ç»“æœ

### åŠŸèƒ½æµ‹è¯•
- âœ… **ä¸ªæ€§åŒ–æƒé‡è°ƒæ•´**: æ ¹æ®å­¦ç”Ÿè¡¨ç°åŠ¨æ€è°ƒæ•´æ¨èç­–ç•¥
- âœ… **é—å¿˜æ›²çº¿å»ºæ¨¡**: æˆåŠŸæ¨¡æ‹ŸçŸ¥è¯†ç‚¹é—å¿˜è¿‡ç¨‹
- âœ… **é”™é¢˜é‡ç°åŠŸèƒ½**: æ™ºèƒ½å®‰æ’é”™é¢˜å¤ä¹ æ—¶æœº
- âœ… **éš¾åº¦è‡ªé€‚åº”**: æ ¹æ®å­¦ç”Ÿæ°´å¹³åŠ¨æ€è°ƒæ•´éš¾åº¦

### APIå…¼å®¹æ€§æµ‹è¯•
- âœ… **å‰ç«¯APIä¿æŒä¸å˜**: æ‰€æœ‰ç°æœ‰APIè°ƒç”¨æ–¹å¼å®Œå…¨å…¼å®¹
- âœ… **è¿”å›æ ¼å¼ä¸€è‡´**: APIè¿”å›æ•°æ®ç»“æ„ä¿æŒåŸæœ‰æ ¼å¼
- âœ… **å‘åå…¼å®¹**: æ–°åŠŸèƒ½ä¸å½±å“ç°æœ‰å‰ç«¯ä»£ç 

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### ç®—æ³•æ”¹è¿›
1. **å‘é‡è®¡ç®—ä¼˜åŒ–**: ç¼“å­˜å¸¸ç”¨è®¡ç®—ç»“æœ
2. **æ‰¹é‡å¤„ç†**: æ‰¹é‡æ›´æ–°å­¦ç”Ÿæ¨¡å‹ï¼Œå‡å°‘é‡å¤è®¡ç®—
3. **æ™ºèƒ½ç¼“å­˜**: ç¼“å­˜æ¨èç»“æœï¼Œé¿å…é‡å¤è®¡ç®—

### å†…å­˜ä¼˜åŒ–
1. **å†å²æ•°æ®ç®¡ç†**: é™åˆ¶å†å²è®°å½•é•¿åº¦ï¼Œé¿å…å†…å­˜æº¢å‡º
2. **æ‡’åŠ è½½**: æŒ‰éœ€åŠ è½½å­¦ç”Ÿæ•°æ®
3. **åƒåœ¾å›æ”¶**: å®šæœŸæ¸…ç†è¿‡æœŸæ•°æ®

## ğŸ“ˆ æ•ˆæœé¢„æœŸ

### æ¨èç²¾åº¦æå‡
- **ä¸ªæ€§åŒ–åŒ¹é…**: æ ¹æ®å­¦ç”Ÿç‰¹ç‚¹æä¾›æ›´ç²¾å‡†çš„é¢˜ç›®æ¨è
- **å­¦ä¹ è·¯å¾„ä¼˜åŒ–**: éµå¾ªå­¦ä¹ è§„å¾‹ï¼Œå¾ªåºæ¸è¿›
- **éš¾åº¦é€‚é…**: é¿å…é¢˜ç›®è¿‡éš¾æˆ–è¿‡æ˜“ï¼Œä¿æŒå­¦ä¹ åŠ¨åŠ›

### å­¦ä¹ æ•ˆæœæ”¹å–„
- **é—å¿˜å¯¹æŠ—**: åŠæ—¶å¤ä¹ è–„å¼±çŸ¥è¯†ç‚¹ï¼ŒåŠ æ·±è®°å¿†
- **é”™é¢˜å·©å›º**: æ™ºèƒ½é‡ç°é”™é¢˜ï¼Œå¼ºåŒ–è–„å¼±ç¯èŠ‚
- **å­¦ä¹ åŠ¨æœº**: ä¸ªæ€§åŒ–æ¨èæé«˜å­¦ä¹ å…´è¶£å’Œæ•ˆç‡

## ğŸ”® æœªæ¥æ‰©å±•

### çŸ­æœŸè®¡åˆ’
1. **å¼ºåŒ–å­¦ä¹ ä¼˜åŒ–**: å¼•å…¥ç”¨æˆ·åé¦ˆï¼ŒæŒç»­ä¼˜åŒ–æ¨èç­–ç•¥
2. **å¤šæ¨¡æ€å­¦ä¹ **: ç»“åˆå­¦ä¹ æ—¶é•¿ã€åœç•™æ—¶é—´ç­‰è¡Œä¸ºæ•°æ®
3. **ååŒè¿‡æ»¤**: åˆ©ç”¨ç›¸ä¼¼å­¦ç”Ÿçš„å­¦ä¹ ç»éªŒ

### é•¿æœŸè§„åˆ’
1. **æ·±åº¦å­¦ä¹ æ¨¡å‹**: ä½¿ç”¨ç¥ç»ç½‘ç»œè¿›è¡Œæ›´å¤æ‚çš„å­¦ä¹ å»ºæ¨¡
2. **çŸ¥è¯†å›¾è°±æ‰©å±•**: æ›´ä¸°å¯Œçš„çŸ¥è¯†å…³ç³»å»ºæ¨¡
3. **å®æ—¶è°ƒä¼˜**: åŸºäºå¤§æ•°æ®çš„å®æ—¶ç®—æ³•ä¼˜åŒ–

## ğŸ“‹ éƒ¨ç½²å»ºè®®

### æ¸è¿›å¼ä¸Šçº¿
1. **A/Bæµ‹è¯•**: å°èŒƒå›´æµ‹è¯•æ–°ç®—æ³•æ•ˆæœ
2. **æ•°æ®ç›‘æ§**: å®æ—¶ç›‘æ§æ¨èæ•ˆæœå’Œç”¨æˆ·åé¦ˆ
3. **é€æ­¥æ¨å¹¿**: æ ¹æ®æµ‹è¯•ç»“æœé€æ­¥æ‰©å¤§ä½¿ç”¨èŒƒå›´

### è¿ç»´ç›‘æ§
1. **æ€§èƒ½ç›‘æ§**: ç›‘æ§APIå“åº”æ—¶é—´å’Œç³»ç»Ÿè´Ÿè½½
2. **æ•ˆæœè¿½è¸ª**: è·Ÿè¸ªå­¦ä¹ æ•ˆæœå’Œç”¨æˆ·æ»¡æ„åº¦
3. **å¼‚å¸¸å¤„ç†**: å»ºç«‹å®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œå›æ»šæœºåˆ¶

---

## æ€»ç»“

æœ¬æ¬¡ä¼˜åŒ–æˆåŠŸå®ç°äº†ä¸ªæ€§åŒ–æƒé‡è°ƒæ•´å’Œé—å¿˜æ›²çº¿å»ºæ¨¡ä¸¤å¤§æ ¸å¿ƒåŠŸèƒ½ï¼Œåœ¨ä¿æŒAPIå®Œå…¨å…¼å®¹çš„å‰æä¸‹ï¼Œæ˜¾è‘—æå‡äº†æ¨èç®—æ³•çš„æ™ºèƒ½åŒ–ç¨‹åº¦ã€‚æ–°ç®—æ³•èƒ½å¤Ÿæ›´å¥½åœ°é€‚åº”ä¸åŒå­¦ç”Ÿçš„å­¦ä¹ ç‰¹ç‚¹ï¼Œæä¾›æ›´ç²¾å‡†çš„ä¸ªæ€§åŒ–æ¨èï¼ŒåŒæ—¶é€šè¿‡é—å¿˜æ›²çº¿å»ºæ¨¡å’Œé”™é¢˜é‡ç°æœºåˆ¶ï¼Œæ›´çœŸå®åœ°æ¨¡æ‹Ÿå­¦ä¹ è¿‡ç¨‹ï¼Œæœ‰æ•ˆæå‡å­¦ä¹ æ•ˆæœã€‚
