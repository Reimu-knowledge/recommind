# 推荐策略算法文档

## 📖 核心流程

推荐系统通过三步为学生推荐题目：
1. **分析学习状态** - 评估学生掌握度、学习趋势、能力水平
2. **选择推荐策略** - 根据学习状态智能选择策略
3. **执行推荐** - 单一策略或混合策略推荐题目

## 🎯 四大推荐策略

| 策略 | 目标 | 适用场景 |
|------|------|----------|
| 查漏补缺 | 攻克薄弱知识点 | 基础薄弱、错误率高 |
| 巩固练习 | 强化中等掌握度知识点 | 需要巩固、中等水平 |
| 知识拓展 | 探索新知识领域 | 基础扎实、准备提升 |
| 平衡推荐 | 均衡发展各层次知识点 | 状态稳定、无明显倾向 |

## 📊 策略选择机制

系统**在每次推荐时**都会分析学习状态，动态选择最适合的策略：
- **初期**：直接使用选定的单一策略
- **后期**：以选定策略为主策略，进行混合推荐

### 关键因素

| 因素 | 查漏补缺 | 巩固练习 | 知识拓展 | 说明 |
|------|----------|----------|----------|------|
| 薄弱知识点多(>40%) | +0.4 | - | - | 基础薄弱需补强 |
| 已掌握知识点多(>60%) | - | - | +0.4 | 具备拓展条件 |
| 中等掌握度多(>40%) | - | +0.4 | - | 需要巩固 |
| 近期正确率低(<40%) | +0.3 | - | - | 基础不牢 |
| 近期正确率高(>80%) | - | - | +0.3 | 可以挑战 |
| 平均掌握度低(<0.3) | +0.25 | - | - | 整体薄弱 |
| 平均掌握度高(>0.7) | - | - | +0.25 | 整体较好 |
| 学习趋势下降 | +0.2 | +0.1 | - | 回归基础 |
| 学习趋势上升 | - | +0.1 | +0.2 | 发展良好 |

## 🔄 策略执行方式

### 单一策略 (初期)
学生学习批次 ≤ 3时，使用单一策略推荐

### 混合策略 (后期)  
学生学习批次 > 3时，**仍会选择主策略**，然后按比例融合：

| 主策略 | 策略分配 | 说明 |
|--------|----------|------|
| 查漏补缺 | 查漏补缺60% + 巩固练习30% + 平衡推荐10% | 以补基础为主导 |
| 知识拓展 | 知识拓展60% + 巩固练习20% + 平衡推荐20% | 以拓展为主导 |
| 巩固练习 | 巩固练习50% + 查漏补缺30% + 知识拓展20% | 平衡各策略 |

## � 策略核心逻辑

### 查漏补缺策略
- 优先选择与已掌握知识点相关的薄弱知识点
- 避免知识跨度过大
- 重视题目的覆盖度和难度适配

### 巩固练习策略  
- 重点关注中等掌握度(0.3-0.5)的知识点
- 结合已掌握知识点进行温习
- 重视题目的关联度

### 知识拓展策略
- 基于向量推理: `V_target = V_mastered + relation_vector`
- 使用多种关系类型: prerequisite(先修)、similarity(相似)、advanced(进阶)
- 结合知识连通性分析寻找拓展机会

### 平衡推荐策略
- 均衡选择：1个薄弱 + 1-2个中等 + 1个已掌握知识点
- 确保学习的全面性和多样性

## 🎯 题目评分与推荐

### 评分维度
每道候选题目会从四个维度评分：
- **覆盖度**: 题目与目标知识点的匹配程度
- **关联度**: 题目与学生已掌握知识点的关联性  
- **多样性**: 题目包含知识点的丰富程度
- **难度适配**: 题目难度与学生能力的匹配度

### 策略权重
不同策略对各评分维度的重视程度：

| 策略 | 覆盖度 | 关联度 | 多样性 | 难度适配 |
|------|--------|--------|--------|----------|
| 查漏补缺 | 50% | 20% | 10% | 20% |
| 巩固练习 | 40% | 30% | 10% | 20% |
| 知识拓展 | 30% | 20% | 30% | 20% |
| 平衡推荐 | 40% | 25% | 15% | 20% |

### 难度适配
根据学生能力调整难度偏好：
- **struggling**: 0.2-0.4 (简单题目)
- **beginner**: 0.3-0.5 (入门题目)
- **intermediate**: 0.4-0.7 (中等题目)  
- **advanced**: 0.6-0.9 (挑战题目)

---

*本文档更新时间：2025年9月11日*
